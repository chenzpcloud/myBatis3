<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chenzpMybatis.dao.AccountDao">

    <resultMap id="baseMap" type="chenzpMybatis.entity.Account">
        <id column="id" property="id" jdbcType="BIGINT"></id>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="money" property="money" jdbcType="DOUBLE"/>
    </resultMap>


    <cache/>

    <sql id="QUERY_COLUMN_LIST">
       select   id,<!--id-->
                 name,<!--name-->
                 money <!--money-->
                 from  account
    </sql>

    <sql id="UPDATE_COLUMN_LIST">
      <set>
          <if test="id !=null">id=#{id},</if>
          <if test="name!=null">name=#{name},</if>
          <if test="money!=null">money=#{money}</if>
      </set>
    </sql>

    <sql id="QUERY_WHERE_CLAUSE">
        <where>
         <if test="id != null"> AND id=#{id} </if>
        <if test="name !=null">AND name=#{name}</if>
        <if test="money !=null">AND money=#{money}</if>
        </where>

    </sql>

    <select id="selectAccoutByCondition" parameterType="chenzpMybatis.entity.Account" resultMap="baseMap">
     <include refid="QUERY_COLUMN_LIST"/>
        <include refid="QUERY_WHERE_CLAUSE"/>
        <![CDATA[limit 1]]>
    </select>

    <delete id="deleteAccountByid" parameterType="int">
        delete from  account where  id=#{id};
    </delete>

    <update id="updateAccountByCondition" parameterType="chenzpMybatis.entity.Account">
        update account
        <include refid="UPDATE_COLUMN_LIST"/>
        <include refid="QUERY_WHERE_CLAUSE"/>
    </update>

    <select id="selectAccountByInfo"  resultType="map" >
       select * from account where  id=#{id} and name = #{name} ;
    </select>


    <select id="selectAccountByIds" resultMap="baseMap">

        <include refid="QUERY_COLUMN_LIST"/>
          where  id in
        <foreach collection="ids" item="item" index="index" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>

</mapper>